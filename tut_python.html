<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Psychophysics in “pure” Python &mdash; Modular Psychophysics 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Modular Psychophysics 2.0 documentation" href="index.html" />
    <link rel="next" title="Control from MATLAB" href="tut_matlab.html" />
    <link rel="prev" title="Tutorials for Modular Psychophysics (mPsy)" href="tutorials.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="index.html">
            <img class="logo" src="_static/logo_mpsy64.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="index.html">Modular Psychophysics 2.0 documentation</a></div>
        <div class="rel">
          <a href="tutorials.html" title="Tutorials for Modular Psychophysics (mPsy)"
             accesskey="P">previous</a> |
          <a href="tut_matlab.html" title="Control from MATLAB"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="psychophysics-in-pure-python">
<h1>Psychophysics in &#8220;pure&#8221; Python<a class="headerlink" href="#psychophysics-in-pure-python" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#the-hello-lattice-experiment" id="id1">The &#8220;Hello Lattice!&#8221; experiment</a></li>
<li><a class="reference internal" href="#recording-responses" id="id2">Recording responses</a></li>
<li><a class="reference internal" href="#randomizing-stimulus-parameters" id="id3">Randomizing stimulus parameters</a></li>
</ul>
</div>
<div class="section" id="the-hello-lattice-experiment">
<h2><a class="toc-backref" href="#id1">The &#8220;Hello Lattice!&#8221; experiment</a><a class="headerlink" href="#the-hello-lattice-experiment" title="Permalink to this headline">¶</a></h2>
<p>We start with a basic example that will use a lattice stimulus.
Our aim is to run a simple experiment with three trials. In each trial we will show first a fixation dot,
then present a dot lattice and finally collect a response. The code of the full &#8220;Hello lattice!&#8221;
experiment is as follows:</p>
<p>To run it simply download the file and execute it. If you are new to Python, I suggest you try
creating and running the script from scratch. Create a simple text file, name it &#8220;dots_tut1.py&#8221;,
copy the code from the box above and paste it into your text editor. Save the script and run it.</p>
<p>Now we will walk through the code:</p>
<p>The first few lines initialize the library (line 1), initialize the window (lines 3-4) and
create Python variables <tt class="docutils literal"><span class="pre">cx,</span> <span class="pre">cy</span></tt> that will hold the coordinates of the center of the screen,
which will later be used to position stimuli.</p>
<p>Next we will need to create presentation screens.</p>
</div>
<div class="section" id="recording-responses">
<h2><a class="toc-backref" href="#id2">Recording responses</a><a class="headerlink" href="#recording-responses" title="Permalink to this headline">¶</a></h2>
<p>We will build on the previous example. We leave the stimuli intact and add a piece of code
that will enable keeping record of various events in the experiment. Events are generated
by mPsy presentation module or by stimuli. Three types of events are generated by default:</p>
<ul class="simple">
<li>TRIAL event - when a trial starts</li>
<li>KEY event - a key is pressed</li>
<li>MOUSE event - a mouse button is pressed</li>
</ul>
<p>To catch the events we need to create a function that gets called every time an event is triggered:</p>
<p>The function and its parameters can have any names, but the number of parameters has to have always the same (four).
The contents of the parameters will be:</p>
<ul>
<li><p class="first">event - text, name of the event</p>
</li>
<li><p class="first">time - numerical value, number of seconds (since when depends on platform)</p>
</li>
<li><p class="first">trial - trial object, this object contains stimuli and its parameters</p>
</li>
<li><dl class="first docutils">
<dt>args - properties of the event, for KEY event the name of the key pressed,</dt>
<dd><p class="first last">for MOUSE event the coordinate and the button clicked</p>
</dd>
</dl>
</li>
</ul>
<p>When you run the resulting file, the file <em>dots2.log</em> will look like this:</p>
<div class="highlight-none"><div class="highlight"><pre>TRIAL 0.575153048996 Start []
KEY 1.31466873576 Start SPACE
TRIAL 1.3156867604 Fixation []
TRIAL 2.33855819112 Lattices []
TRIAL 3.86717378322 Response []
MOUSE 5.86993089944 Response [814, 453, 1]
TRIAL 5.87124100698 Fixation []
TRIAL 6.89199839131 Lattices []
TRIAL 8.42179287708 Response []
MOUSE 9.6018394316 Response [627, 428, 1]
TRIAL 9.60313044609 Fixation []
TRIAL 10.6309067569 Lattices []
TRIAL 12.1618943546 Response []
MOUSE 15.1811783249 Response [814, 456, 1]
TRIAL 15.1816048716 End []
</pre></div>
</div>
<p>Sometimes it might be more useful to keep only the response, this can be done by looking at the content
of the parameters passed to the logging function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">record_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">trial</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s">&#39;MOUSE&#39;</span> <span class="ow">and</span> <span class="n">trial</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Response&#39;</span><span class="p">:</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span><span class="n">log</span><span class="p">,</span> <span class="s">&#39;RESP&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>A record of such an experiment would the look like this:</p>
<div class="highlight-none"><div class="highlight"><pre>RESP 814 453
RESP 627 428
RESP 814 456
</pre></div>
</div>
<p>Later on we will show how to compute correctness of the response before writing it out.</p>
</div>
<div class="section" id="randomizing-stimulus-parameters">
<h2><a class="toc-backref" href="#id3">Randomizing stimulus parameters</a><a class="headerlink" href="#randomizing-stimulus-parameters" title="Permalink to this headline">¶</a></h2>
<p>Parameters of stimuli in an experiment are usually randomized, shuffled.
To generate a specific number of shuffled parameters we can use Python lists. Specifically,
two operations come in handy, shuffling and concatenation.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">ratios</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">1.3</span><span class="p">,</span><span class="mf">1.4</span><span class="p">,</span><span class="mf">1.5</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="n">shuffle</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="n">ratios</span>
<span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
</pre></div>
</div>
<p>In the snippet above, we have created a list of values. Then we used Python <cite>shuffle</cite> function
to shuffle the list in-place (this means, the original list will be modified).</p>
<p>To create a more complicated set of parameters we can concatenate list by the <cite>+</cite> operator
or make multiple copies of a list with the <cite>*</cite> operator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">ratios</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">1.2</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="n">ratios</span> <span class="o">+</span> <span class="n">ratios</span>
<span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="n">ratios</span><span class="o">*</span><span class="mi">3</span>
<span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="p">[</span><span class="n">ratios</span><span class="p">,</span><span class="n">ratios</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span>
<span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]]</span>
</pre></div>
</div>
<p>To create three blocks of shuffled trials:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trials</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">ratios</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">1.2</span><span class="p">]</span>
    <span class="n">shuffle</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
    <span class="n">trials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
</pre></div>
</div>
<p>Then</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">trials</span>
<span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">],[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]]</span>
</pre></div>
</div>
<p>The <cite>trials</cite> list of blocks, as any other list, can be shuffled.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="n">trials</span>
<span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">],[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <!--<h3>Table Of Contents</h3>-->
          <h3>Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Control from Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-hello-lattice-experiment">The &#8220;Hello Lattice!&#8221; experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recording-responses">Recording responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="#randomizing-stimulus-parameters">Randomizing stimulus parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tut_matlab.html">Control from MATLAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_r.html">Control from R</a></li>
<li class="toctree-l1"><a class="reference internal" href="stimuli.html">Standard stimulus library</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_stimuli.html">New stimuli</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Brief function reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html#indices-and-tables">Indices and tables</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="tutorials.html" title="Tutorials for Modular Psychophysics (mPsy)"
             >previous</a> |
          <a href="tut_matlab.html" title="Control from MATLAB"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="_sources/tut_python.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2014, Peter Jurica, Sergei Gepshtein.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>