<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Controlling mPsy experiments from R &mdash; Modular Psychophysics 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Modular Psychophysics 2.0 documentation" href="index.html" />
    <link rel="next" title="Stimulus Library" href="stimuli.html" />
    <link rel="prev" title="Controlling mPsy experiments from MATLAB" href="tut_matlab.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="index.html">
            <img class="logo" src="_static/logo_mpsy64.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="index.html">Modular Psychophysics 2.0 documentation</a></div>
        <div class="rel">
          <a href="tut_matlab.html" title="Controlling mPsy experiments from MATLAB"
             accesskey="P">previous</a> |
          <a href="stimuli.html" title="Stimulus Library"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="controlling-mpsy-experiments-from-r">
<h1>Controlling <cite>mPsy</cite> experiments from R<a class="headerlink" href="#controlling-mpsy-experiments-from-r" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#installation" id="id1">Installation</a></li>
<li><a class="reference internal" href="#a-simple-r-experiment" id="id2">A simple R experiment</a></li>
<li><a class="reference internal" href="#recording-responses" id="id3">Recording responses</a></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id1">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>You can download mPsy with sample experiment written in R from
<a class="reference external" href="https://dl.dropboxusercontent.com/u/166463/visionpyg/downloads/mpsy_r.zip">here</a>.</p>
<p>In what is described on this page, the R environment is used only to specify the timeline of experiment and its parameters.
Presentation of stimuli still require a working Python installation as descibed in <a class="reference internal" href="index.html"><em>Modular Psychophysics (mPsy)</em></a>.</p>
<p>Once you have Python installed, exctract the downloaded mPsy package into an empty directory.</p>
<p>The mPsy-to-R bridge script uses two R packages that might be not installed in your distribution.
These packages are &#8220;rjson&#8221; and &#8220;httpRequest&#8221;, please install them using your favorite method.</p>
</div>
<div class="section" id="a-simple-r-experiment">
<h2><a class="toc-backref" href="#id2">A simple R experiment</a><a class="headerlink" href="#a-simple-r-experiment" title="Permalink to this headline">¶</a></h2>
<p>As stated in the first section the experiment will be essentially running in Python, R will
be used to remotelly control this experiment. The Python program that will &#8220;listen&#8221; to the R
commands is a simple experiment with no stimuli and remote control component included:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stimuli</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">fullscreen</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">fullscreen</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">768</span><span class="p">)</span>
    <span class="n">win</span> <span class="o">=</span> <span class="n">ExpWindow</span><span class="p">(</span><span class="n">fullscreen</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">win</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">win</span><span class="o">.</span><span class="n">height</span>
    <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">=</span> <span class="n">win</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">win</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span><span class="mi">2</span>

    <span class="c"># tell visionpyg about remote control</span>
    <span class="kn">import</span> <span class="nn">web</span>
    <span class="n">remote</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_remote</span><span class="p">(</span><span class="n">remote</span><span class="p">)</span>
    <span class="c"># capture event by the remote control</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_logger</span><span class="p">(</span><span class="n">remote</span><span class="o">.</span><span class="n">event</span><span class="p">)</span>
    
    <span class="c"># run experiment</span>
    <span class="c"># visionpyg takes Trials from the begining of the trials list</span>
    <span class="c"># if the trials list is eempty visionpyg waits</span>
    <span class="c"># ESCAPE stops the experiment at any time</span>
    <span class="n">run</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The web remote control is enabled by the following code:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="c"># tell visionpyg about remote control</span>
    <span class="kn">import</span> <span class="nn">web</span>
    <span class="n">remote</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_remote</span><span class="p">(</span><span class="n">remote</span><span class="p">)</span>
    <span class="c"># capture event by the remote control</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_logger</span><span class="p">(</span><span class="n">remote</span><span class="o">.</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>When the remotely controllable Python experiment is running we can use R to define when and
what stimuli appear on the screen. The mPsy Python package will take care of stimulus presentation,
subject interaction such as the collecting responses, and transmission of collected information back
to the R program.</p>
<p>The R experiment looks as follows:</p>
<div class="highlight-r"><div class="highlight"><pre>source<span class="p">(</span><span class="s">&#39;visionpyg.r&#39;</span><span class="p">)</span>

<span class="c1"># EXPERIMENT</span>
win <span class="o">&lt;-</span> grating_info<span class="p">()</span>
cx <span class="o">&lt;-</span> round<span class="p">(</span>win<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">/</span><span class="m">2</span><span class="p">)</span>
cy <span class="o">&lt;-</span> round<span class="p">(</span>win<span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">/</span><span class="m">2</span><span class="p">)</span>

<span class="c1"># prepare grating configuration</span>
p_lattice <span class="o">=</span>  Params<span class="p">(</span>ap_fs<span class="o">=</span><span class="m">0.0</span><span class="p">,</span> ap_sigma<span class="o">=</span><span class="m">130.0</span><span class="p">,</span> ap_edge<span class="o">=</span><span class="m">4.0</span><span class="p">,</span>
                    gamma<span class="o">=</span>pi<span class="o">/</span><span class="m">2</span><span class="p">,</span> theta<span class="o">=</span><span class="m">0.0</span><span class="p">,</span> dx<span class="o">=</span><span class="m">60.0</span><span class="p">,</span> r<span class="o">=</span><span class="m">1.5</span><span class="p">,</span>
                    dot_size<span class="o">=</span><span class="m">100.0</span><span class="p">,</span> dot_sigma<span class="o">=</span><span class="m">0.3</span><span class="p">,</span> dot_fs<span class="o">=</span><span class="m">0.0</span><span class="p">,</span>
                    dot_edge<span class="o">=</span><span class="m">10.0</span><span class="p">,</span> dot_c<span class="o">=</span><span class="m">0.4</span><span class="p">,</span> dot_phi<span class="o">=</span><span class="m">0.2</span><span class="p">)</span>

<span class="c1"># setup presentation screens</span>
stimuli_dots <span class="o">=</span> list<span class="p">(</span> DotLattice<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>p_lattice<span class="p">)</span> <span class="p">)</span>

<span class="c1"># this time response screen is different for every trial</span>
<span class="c1"># we make a function that will generate proper response choice</span>
response_screen <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>t1<span class="p">,</span>t2<span class="p">,</span>t3<span class="p">,</span>t4<span class="p">)</span>
<span class="p">{</span>
    list<span class="p">(</span> Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">+100</span><span class="p">,</span>cy<span class="m">+100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t1<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">+100</span><span class="p">,</span>cy<span class="m">-100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t2<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">-100</span><span class="p">,</span>cy<span class="m">-100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t3<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">-100</span><span class="p">,</span>cy<span class="m">+100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t4<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">))</span> <span class="p">)</span>
<span class="p">}</span>

theta <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>p<span class="p">)</span>
<span class="p">{</span>
    t <span class="o">=</span> as.double<span class="p">(</span>p<span class="p">[</span><span class="s">&#39;theta&#39;</span><span class="p">])</span>
    g <span class="o">=</span> as.double<span class="p">(</span>p<span class="p">[</span><span class="s">&#39;gamma&#39;</span><span class="p">])</span>
    bvec <span class="o">=</span> r<span class="o">*</span>exp<span class="p">(</span><span class="m">1i</span><span class="o">*</span>g<span class="p">)</span>
    c<span class="p">(</span>t<span class="p">,</span>t<span class="o">+</span>g<span class="p">,</span>t<span class="o">+</span>angle<span class="p">(</span>bvec<span class="m">+1</span><span class="p">),</span>t<span class="o">+</span>angle<span class="p">(</span>bvec<span class="m">-1</span><span class="p">))</span>
<span class="p">}</span>

welcome_line  <span class="o">=</span> list<span class="p">(</span> Text<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="m">-50</span><span class="p">),</span>Params<span class="p">(</span>msg<span class="o">=</span><span class="s">&#39;Press SPACE when ready.&#39;</span><span class="p">))</span> <span class="p">)</span>
farewell_line <span class="o">=</span> list<span class="p">(</span> Text<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="m">-50</span><span class="p">),</span>Params<span class="p">(</span>msg<span class="o">=</span><span class="s">&#39;Thank you for participation!&#39;</span><span class="p">))</span> <span class="p">)</span>
dot <span class="o">=</span> list<span class="p">(</span> Dot<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>Params<span class="p">(</span>c<span class="o">=</span><span class="m">0.5</span><span class="p">))</span> <span class="p">)</span>

keys_none     <span class="o">=</span> list<span class="p">()</span>
keys_space    <span class="o">=</span> list<span class="p">(</span>key.SPACE<span class="p">)</span>
keys_response <span class="o">=</span> list<span class="p">(</span>key.NUM_1<span class="p">,</span>key.NUM_2<span class="p">,</span>key.NUM_3<span class="p">)</span>
<span class="c1"># key names are listed at http://www.pyglet.org/doc/api/pyglet.window.key-module.html</span>

<span class="c1"># add a message screen, wait until button press (duration=0 means wait)</span>
trials <span class="o">&lt;-</span> list<span class="p">(</span> Trial<span class="p">(</span><span class="s">&#39;Start&#39;</span><span class="p">,</span>welcome_line<span class="p">,</span><span class="m">0</span><span class="p">,</span>keys_space<span class="p">)</span> <span class="p">)</span>

<span class="c1"># prepare 6*5 ratios</span>
ratios <span class="o">=</span> c<span class="p">()</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">1</span><span class="p">)</span> ratios <span class="o">=</span> c<span class="p">(</span>ratios<span class="p">,</span>c<span class="p">(</span><span class="m">1.0</span><span class="p">,</span><span class="m">1.1</span><span class="p">,</span><span class="m">1.2</span><span class="p">,</span><span class="m">1.3</span><span class="p">,</span><span class="m">1.4</span><span class="p">))</span>
<span class="c1"># and shuffle them</span>
ratios <span class="o">=</span> sample<span class="p">(</span>ratios<span class="p">)</span>
gamma <span class="o">=</span> rads<span class="p">(</span><span class="m">90.0</span><span class="p">)</span>

<span class="c1"># add three Trials each consisting of a Fixation, Stimulus and a Response screen</span>
<span class="kr">for</span> <span class="p">(</span>r <span class="kr">in</span> ratios<span class="p">)</span>
<span class="p">{</span>
    <span class="c1"># generate a new lattice, rotated by a random angle</span>
    th <span class="o">=</span> <span class="m">2</span><span class="o">*</span>pi<span class="o">*</span>runif<span class="p">(</span><span class="m">1</span><span class="p">)</span>
    new_params <span class="o">=</span> copy_params<span class="p">(</span>p_lattice<span class="p">,</span>r<span class="o">=</span>r<span class="p">,</span>gamma<span class="o">=</span>gamma<span class="p">,</span>theta<span class="o">=</span>th<span class="p">)</span>
    lattice <span class="o">=</span> list<span class="p">(</span> DotLattice<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>new_params<span class="p">)</span> <span class="p">)</span>
    <span class="c1"># create response button that correspond to presented stimuli</span>
    options <span class="o">=</span> theta<span class="p">(</span>new_params<span class="p">)</span>
    <span class="c1"># shuffle them</span>
    options <span class="o">=</span> sample<span class="p">(</span>options<span class="p">)</span>
    responses <span class="o">=</span> do.call<span class="p">(</span>response_screen<span class="p">,</span> as.list<span class="p">(</span>options<span class="p">))</span>
    <span class="c1"># add the trial</span>
    trial <span class="o">=</span> list<span class="p">(</span> Trial<span class="p">(</span><span class="s">&#39;Fixation&#39;</span><span class="p">,</span>       dot<span class="p">,</span> <span class="m">1000</span><span class="p">,</span> keys_none<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Lattices&#39;</span><span class="p">,</span>   lattice<span class="p">,</span>  <span class="m">300</span><span class="p">,</span> keys_space<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Blank&#39;</span>   <span class="p">,</span>    list<span class="p">(),</span>  <span class="m">300</span><span class="p">,</span> keys_none<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Response&#39;</span><span class="p">,</span> responses<span class="p">,</span>    <span class="m">0</span><span class="p">,</span> keys_response<span class="p">,</span> mouse<span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="p">)</span>
    trials <span class="o">=</span> c<span class="p">(</span>trials<span class="p">,</span>trial<span class="p">)</span>
<span class="p">}</span>

trials <span class="o">&lt;-</span> c<span class="p">(</span> trials<span class="p">,</span> list<span class="p">(</span>Trial<span class="p">(</span><span class="s">&#39;End&#39;</span><span class="p">,</span>farewell_line<span class="p">,</span><span class="m">0</span><span class="p">,</span>keys_none<span class="p">))</span> <span class="p">)</span>

<span class="c1"># tell visionpyg about trials</span>
set_trials<span class="p">(</span>trials<span class="p">)</span>

<span class="c1"># watch the events for 10 seconds</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>
<span class="p">{</span>
    Sys.sleep<span class="p">(</span><span class="m">1.0</span><span class="p">)</span>
    events <span class="o">=</span> grating_events<span class="p">()</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>events<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="kr">for</span> <span class="p">(</span>j <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>length<span class="p">(</span>events<span class="p">))</span>
        <span class="p">{</span>
            ev <span class="o">=</span> events<span class="p">[[</span>j<span class="p">]]</span>
            <span class="kr">if</span> <span class="p">(</span>ev<span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">==</span><span class="s">&#39;TRIAL&#39;</span> <span class="o">&amp;&amp;</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;Lattices&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                th <span class="o">=</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][[</span><span class="s">&#39;stimuli&#39;</span><span class="p">]][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;params&#39;</span><span class="p">][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, theta = %0.2f\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>th<span class="p">))</span>
            <span class="p">}</span>
            <span class="kr">else</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, response &#39;%s&#39;\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>toJSON<span class="p">(</span>ev<span class="p">[[</span><span class="m">4</span><span class="p">]])))</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To run the demo experiment first download the file. Next run the &#8220;exp_tut_webremote.py&#8221;
(double click, or use Terminal or cmd.exe and execute by typing &#8220;python exp_tut_webremote.py&#8221;).
A succesfull execution of the Python program results in a blank  black screen
(or a black window in case fullscreen option is off). At this point you can go to R,
change the working directory to the one containing the file &#8220;dots_tut3.r&#8221; and run &#8220;source(&#8216;dots_tut3.r&#8217;)&#8221;.</p>
<p>The syntax of the R experiment is modelled after the Python examples. Please refer
to the main tutorial &#8220;<a class="reference internal" href="index.html"><em>Modular Psychophysics (mPsy)</em></a>&#8221; for explanation of commands for stimulus parameter and trial setup.</p>
</div>
<div class="section" id="recording-responses">
<h2><a class="toc-backref" href="#id3">Recording responses</a><a class="headerlink" href="#recording-responses" title="Permalink to this headline">¶</a></h2>
<p>Events triggered by mPsy or subject interation are described in the main Python tutorial
in <a class="reference internal" href="tut_python.html"><em>Psychophysics in &#8220;pure&#8221; Python</em></a>.</p>
<p>To catch events in R we regularly check for any messages accumulating in the Python presentation program:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="c1"># watch the events for 10 seconds</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>
<span class="p">{</span>
    Sys.sleep<span class="p">(</span><span class="m">1.0</span><span class="p">)</span>
    events <span class="o">=</span> grating_events<span class="p">()</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>events<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="kr">for</span> <span class="p">(</span>j <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>length<span class="p">(</span>events<span class="p">))</span>
        <span class="p">{</span>
            ev <span class="o">=</span> events<span class="p">[[</span>j<span class="p">]]</span>
            <span class="kr">if</span> <span class="p">(</span>ev<span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">==</span><span class="s">&#39;TRIAL&#39;</span> <span class="o">&amp;&amp;</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;Lattices&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                th <span class="o">=</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][[</span><span class="s">&#39;stimuli&#39;</span><span class="p">]][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;params&#39;</span><span class="p">][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, theta = %0.2f\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>th<span class="p">))</span>
            <span class="p">}</span>
            <span class="kr">else</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, response &#39;%s&#39;\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>toJSON<span class="p">(</span>ev<span class="p">[[</span><span class="m">4</span><span class="p">]])))</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <!--<h3>Table Of Contents</h3>-->
          <h3>Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_python.html">Control from Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_matlab.html">Control from MATLAB</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Control from R</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-r-experiment">A simple R experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recording-responses">Recording responses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stimuli.html">Stimulus library</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_stimuli.html">New stimuli</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Brief function reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html#indices-and-tables">Indices and tables</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="tut_matlab.html" title="Controlling mPsy experiments from MATLAB"
             >previous</a> |
          <a href="stimuli.html" title="Stimulus Library"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="_sources/tut_r.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2014, Peter Jurica, Sergei Gepshtein.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>