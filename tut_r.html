<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Control from R &mdash; Modular Psychophysics 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Modular Psychophysics 2.0 documentation" href="index.html" />
    <link rel="next" title="Standard library" href="stimuli.html" />
    <link rel="prev" title="Control from MATLAB" href="tut_matlab.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="index.html">
            <img class="logo" src="_static/logo_mpsy64.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="index.html">Modular Psychophysics 2.0 documentation</a></div>
        <div class="rel">
          <a href="tut_matlab.html" title="Control from MATLAB"
             accesskey="P">previous</a> |
          <a href="stimuli.html" title="Standard library"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="control-from-r">
<h1>Control from R<a class="headerlink" href="#control-from-r" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#installation" id="id1">Installation</a></li>
<li><a class="reference internal" href="#sample-experiment" id="id2">Sample experiment</a></li>
<li><a class="reference internal" href="#recording-responses" id="id3">Recording responses</a></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id1">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Download mPsy with the sample experiment in R from
<a class="reference external" href="https://dl.dropboxusercontent.com/u/166463/mpsy/download/mpsy_r.zip">here</a>.</p>
<p>In the following the R environment is used only to define stimulus parameters and the timeline of the experiment.</p>
<p>Presentation of stimuli requires a working Python installation as described in <a class="reference internal" href="tutorials.html"><em>Tutorials</em></a>. Once Python is installed, extract the downloaded mPsy package into an empty directory.</p>
<p>The bridge between mPsy and R uses two R packages: <tt class="docutils literal"><span class="pre">rjson</span></tt> and <tt class="docutils literal"><span class="pre">ttpRequest</span></tt>. Make sure you have them.</p>
</div>
<div class="section" id="sample-experiment">
<h2><a class="toc-backref" href="#id2">Sample experiment</a><a class="headerlink" href="#sample-experiment" title="Permalink to this headline">¶</a></h2>
<p>In this experiment R is used to remotely control the experiment run in Python.</p>
<p>The following Python program &#8220;listens&#8221; to R commands and it presents no stimuli.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stimuli</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">fullscreen</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">fullscreen</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">768</span><span class="p">)</span>
    <span class="n">win</span> <span class="o">=</span> <span class="n">ExpWindow</span><span class="p">(</span><span class="n">fullscreen</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">win</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">win</span><span class="o">.</span><span class="n">height</span>
    <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">=</span> <span class="n">win</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">win</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span><span class="mi">2</span>

    <span class="c"># tell mPsy about remote control</span>
    <span class="kn">import</span> <span class="nn">web</span>
    <span class="n">remote</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_remote</span><span class="p">(</span><span class="n">remote</span><span class="p">)</span>
    <span class="c"># capture event by the remote control</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_logger</span><span class="p">(</span><span class="n">remote</span><span class="o">.</span><span class="n">event</span><span class="p">)</span>
    
    <span class="c"># run experiment</span>
    <span class="c"># mPsy takes Trials from the begining of the trials list</span>
    <span class="c"># if the trials list is empty mPsy waits</span>
    <span class="c"># ESCAPE stops the experiment at any time</span>
    <span class="n">run</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The remote control is enabled by:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="c"># tell mPsy about remote control</span>
    <span class="kn">import</span> <span class="nn">web</span>
    <span class="n">remote</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_remote</span><span class="p">(</span><span class="n">remote</span><span class="p">)</span>
    <span class="c"># capture event by the remote control</span>
    <span class="n">win</span><span class="o">.</span><span class="n">set_logger</span><span class="p">(</span><span class="n">remote</span><span class="o">.</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>When the Python experiment is already running, we use R to define what stimuli appear on the screen and when. mPsy will take care of stimulus presentation and
interaction with the subject (i.e., it will collect responses and send this information back  to R).</p>
<p>Here is the code in R:</p>
<div class="highlight-r"><div class="highlight"><pre>source<span class="p">(</span><span class="s">&#39;mPsy.r&#39;</span><span class="p">)</span>

<span class="c1"># EXPERIMENT</span>
win <span class="o">&lt;-</span> mpsy_info<span class="p">()</span>
cx <span class="o">&lt;-</span> round<span class="p">(</span>win<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">/</span><span class="m">2</span><span class="p">)</span>
cy <span class="o">&lt;-</span> round<span class="p">(</span>win<span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">/</span><span class="m">2</span><span class="p">)</span>

<span class="c1"># prepare grating configuration</span>
p_lattice <span class="o">=</span>  Params<span class="p">(</span>ap_fs<span class="o">=</span><span class="m">0.0</span><span class="p">,</span> ap_sigma<span class="o">=</span><span class="m">130.0</span><span class="p">,</span> ap_edge<span class="o">=</span><span class="m">4.0</span><span class="p">,</span>
                    gamma<span class="o">=</span>pi<span class="o">/</span><span class="m">2</span><span class="p">,</span> theta<span class="o">=</span><span class="m">0.0</span><span class="p">,</span> dx<span class="o">=</span><span class="m">60.0</span><span class="p">,</span> r<span class="o">=</span><span class="m">1.5</span><span class="p">,</span>
                    dot_size<span class="o">=</span><span class="m">100.0</span><span class="p">,</span> dot_sigma<span class="o">=</span><span class="m">0.3</span><span class="p">,</span> dot_fs<span class="o">=</span><span class="m">0.0</span><span class="p">,</span>
                    dot_edge<span class="o">=</span><span class="m">10.0</span><span class="p">,</span> dot_c<span class="o">=</span><span class="m">0.4</span><span class="p">,</span> dot_phi<span class="o">=</span><span class="m">0.2</span><span class="p">)</span>

<span class="c1"># setup presentation screens</span>
stimuli_dots <span class="o">=</span> list<span class="p">(</span> DotLattice<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>p_lattice<span class="p">)</span> <span class="p">)</span>

<span class="c1"># this time response screen is different for every trial</span>
<span class="c1"># we make a function that will generate proper response choice</span>
response_screen <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>t1<span class="p">,</span>t2<span class="p">,</span>t3<span class="p">,</span>t4<span class="p">)</span>
<span class="p">{</span>
    list<span class="p">(</span> Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">+100</span><span class="p">,</span>cy<span class="m">+100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t1<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">+100</span><span class="p">,</span>cy<span class="m">-100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t2<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">-100</span><span class="p">,</span>cy<span class="m">-100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t3<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">)),</span>
          Pill<span class="p">(</span>c<span class="p">(</span>cx<span class="m">-100</span><span class="p">,</span>cy<span class="m">+100</span><span class="p">),</span>Params<span class="p">(</span>th<span class="o">=</span>t4<span class="p">,</span>R<span class="o">=</span><span class="m">55</span><span class="p">,</span>d<span class="o">=</span><span class="m">5</span><span class="p">))</span> <span class="p">)</span>
<span class="p">}</span>

theta <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>p<span class="p">)</span>
<span class="p">{</span>
    t <span class="o">=</span> as.double<span class="p">(</span>p<span class="p">[</span><span class="s">&#39;theta&#39;</span><span class="p">])</span>
    g <span class="o">=</span> as.double<span class="p">(</span>p<span class="p">[</span><span class="s">&#39;gamma&#39;</span><span class="p">])</span>
    bvec <span class="o">=</span> r<span class="o">*</span>exp<span class="p">(</span><span class="m">1i</span><span class="o">*</span>g<span class="p">)</span>
    c<span class="p">(</span>t<span class="p">,</span>t<span class="o">+</span>g<span class="p">,</span>t<span class="o">+</span>angle<span class="p">(</span>bvec<span class="m">+1</span><span class="p">),</span>t<span class="o">+</span>angle<span class="p">(</span>bvec<span class="m">-1</span><span class="p">))</span>
<span class="p">}</span>

welcome_line  <span class="o">=</span> list<span class="p">(</span> Text<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="m">-50</span><span class="p">),</span>Params<span class="p">(</span>msg<span class="o">=</span><span class="s">&#39;Press SPACE when ready.&#39;</span><span class="p">))</span> <span class="p">)</span>
farewell_line <span class="o">=</span> list<span class="p">(</span> Text<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="m">-50</span><span class="p">),</span>Params<span class="p">(</span>msg<span class="o">=</span><span class="s">&#39;Thank you for participation!&#39;</span><span class="p">))</span> <span class="p">)</span>
dot <span class="o">=</span> list<span class="p">(</span> Dot<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>Params<span class="p">(</span>c<span class="o">=</span><span class="m">0.5</span><span class="p">))</span> <span class="p">)</span>

keys_none     <span class="o">=</span> list<span class="p">()</span>
keys_space    <span class="o">=</span> list<span class="p">(</span>key.SPACE<span class="p">)</span>
keys_response <span class="o">=</span> list<span class="p">(</span>key.NUM_1<span class="p">,</span>key.NUM_2<span class="p">,</span>key.NUM_3<span class="p">)</span>
<span class="c1"># key names are listed at http://www.pyglet.org/doc/api/pyglet.window.key-module.html</span>

<span class="c1"># add a message screen, wait until button press (duration=0 means wait)</span>
trials <span class="o">&lt;-</span> list<span class="p">(</span> Trial<span class="p">(</span><span class="s">&#39;Start&#39;</span><span class="p">,</span>welcome_line<span class="p">,</span><span class="m">0</span><span class="p">,</span>keys_space<span class="p">)</span> <span class="p">)</span>

<span class="c1"># prepare 6*5 ratios</span>
ratios <span class="o">=</span> c<span class="p">()</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">1</span><span class="p">)</span> ratios <span class="o">=</span> c<span class="p">(</span>ratios<span class="p">,</span>c<span class="p">(</span><span class="m">1.0</span><span class="p">,</span><span class="m">1.1</span><span class="p">,</span><span class="m">1.2</span><span class="p">,</span><span class="m">1.3</span><span class="p">,</span><span class="m">1.4</span><span class="p">))</span>
<span class="c1"># and shuffle them</span>
ratios <span class="o">=</span> sample<span class="p">(</span>ratios<span class="p">)</span>
gamma <span class="o">=</span> rads<span class="p">(</span><span class="m">90.0</span><span class="p">)</span>

<span class="c1"># add three Trials each consisting of a Fixation, Stimulus and a Response screen</span>
<span class="kr">for</span> <span class="p">(</span>r <span class="kr">in</span> ratios<span class="p">)</span>
<span class="p">{</span>
    <span class="c1"># generate a new lattice, rotated by a random angle</span>
    th <span class="o">=</span> <span class="m">2</span><span class="o">*</span>pi<span class="o">*</span>runif<span class="p">(</span><span class="m">1</span><span class="p">)</span>
    new_params <span class="o">=</span> copy_params<span class="p">(</span>p_lattice<span class="p">,</span>r<span class="o">=</span>r<span class="p">,</span>gamma<span class="o">=</span>gamma<span class="p">,</span>theta<span class="o">=</span>th<span class="p">)</span>
    lattice <span class="o">=</span> list<span class="p">(</span> DotLattice<span class="p">(</span>c<span class="p">(</span>cx<span class="p">,</span>cy<span class="p">),</span>new_params<span class="p">)</span> <span class="p">)</span>
    <span class="c1"># create response button that correspond to presented stimuli</span>
    options <span class="o">=</span> theta<span class="p">(</span>new_params<span class="p">)</span>
    <span class="c1"># shuffle them</span>
    options <span class="o">=</span> sample<span class="p">(</span>options<span class="p">)</span>
    responses <span class="o">=</span> do.call<span class="p">(</span>response_screen<span class="p">,</span> as.list<span class="p">(</span>options<span class="p">))</span>
    <span class="c1"># add the trial</span>
    trial <span class="o">=</span> list<span class="p">(</span> Trial<span class="p">(</span><span class="s">&#39;Fixation&#39;</span><span class="p">,</span>       dot<span class="p">,</span> <span class="m">1000</span><span class="p">,</span> keys_none<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Lattices&#39;</span><span class="p">,</span>   lattice<span class="p">,</span>  <span class="m">300</span><span class="p">,</span> keys_space<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Blank&#39;</span>   <span class="p">,</span>    list<span class="p">(),</span>  <span class="m">300</span><span class="p">,</span> keys_none<span class="p">),</span>
                  Trial<span class="p">(</span><span class="s">&#39;Response&#39;</span><span class="p">,</span> responses<span class="p">,</span>    <span class="m">0</span><span class="p">,</span> keys_response<span class="p">,</span> mouse<span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="p">)</span>
    trials <span class="o">=</span> c<span class="p">(</span>trials<span class="p">,</span>trial<span class="p">)</span>
<span class="p">}</span>

trials <span class="o">&lt;-</span> c<span class="p">(</span> trials<span class="p">,</span> list<span class="p">(</span>Trial<span class="p">(</span><span class="s">&#39;End&#39;</span><span class="p">,</span>farewell_line<span class="p">,</span><span class="m">0</span><span class="p">,</span>keys_none<span class="p">))</span> <span class="p">)</span>

<span class="c1"># tell mPsy about trials</span>
set_trials<span class="p">(</span>trials<span class="p">)</span>

<span class="c1"># watch the events for 10 seconds</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>
<span class="p">{</span>
    Sys.sleep<span class="p">(</span><span class="m">1.0</span><span class="p">)</span>
    events <span class="o">=</span> mpsy_events<span class="p">()</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>events<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="kr">for</span> <span class="p">(</span>j <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>length<span class="p">(</span>events<span class="p">))</span>
        <span class="p">{</span>
            ev <span class="o">=</span> events<span class="p">[[</span>j<span class="p">]]</span>
            <span class="kr">if</span> <span class="p">(</span>ev<span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">==</span><span class="s">&#39;TRIAL&#39;</span> <span class="o">&amp;&amp;</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;Lattices&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                th <span class="o">=</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][[</span><span class="s">&#39;stimuli&#39;</span><span class="p">]][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;params&#39;</span><span class="p">][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, theta = %0.2f\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>th<span class="p">))</span>
            <span class="p">}</span>
            <span class="kr">else</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, response &#39;%s&#39;\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>toJSON<span class="p">(</span>ev<span class="p">[[</span><span class="m">4</span><span class="p">]])))</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To run this demonstration, download the file and run <tt class="docutils literal"><span class="pre">exp_tut_webremote.py</span></tt> by</p>
<blockquote>
<div><ul class="simple">
<li>either double-clicking the file name</li>
<li>or executing <tt class="docutils literal"><span class="pre">python</span> <span class="pre">exp_tut_webremote.py</span></tt> in the Terminal.</li>
</ul>
</div></blockquote>
<p>A successfully executed Python program will create an empty black screen or an empty black window if the <tt class="docutils literal"><span class="pre">fullscreen</span></tt> option is off.</p>
<p>At this point you can go to R, change the working directory to the one containing the file <tt class="docutils literal"><span class="pre">dots_tut3.r</span></tt> and run <tt class="docutils literal"><span class="pre">source('dots_tut3.r')</span></tt>.</p>
<p>The syntax of the sample experiment in R is modelled after the sample example in Python. See main <a class="reference internal" href="tutorials.html"><em>Tutorials</em></a> for an explanation of how to control the parameters of stimuli and the timeline.</p>
</div>
<div class="section" id="recording-responses">
<h2><a class="toc-backref" href="#id3">Recording responses</a><a class="headerlink" href="#recording-responses" title="Permalink to this headline">¶</a></h2>
<p>The events triggered by mPsy or the subject are described in the main Python tutorial  <a class="reference internal" href="tut_python.html"><em>Control from Python</em></a>.</p>
<p>To catch events in R we regularly check for messages accumulating in the Python presentation program:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="c1"># watch the events for 10 seconds</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>
<span class="p">{</span>
    Sys.sleep<span class="p">(</span><span class="m">1.0</span><span class="p">)</span>
    events <span class="o">=</span> mpsy_events<span class="p">()</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>events<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="kr">for</span> <span class="p">(</span>j <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>length<span class="p">(</span>events<span class="p">))</span>
        <span class="p">{</span>
            ev <span class="o">=</span> events<span class="p">[[</span>j<span class="p">]]</span>
            <span class="kr">if</span> <span class="p">(</span>ev<span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">==</span><span class="s">&#39;TRIAL&#39;</span> <span class="o">&amp;&amp;</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;Lattices&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                th <span class="o">=</span> ev<span class="p">[[</span><span class="m">3</span><span class="p">]][[</span><span class="s">&#39;stimuli&#39;</span><span class="p">]][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;params&#39;</span><span class="p">][[</span><span class="m">1</span><span class="p">]][</span><span class="s">&#39;theta&#39;</span><span class="p">]</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, theta = %0.2f\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>th<span class="p">))</span>
            <span class="p">}</span>
            <span class="kr">else</span>
                cat<span class="p">(</span>sprintf<span class="p">(</span><span class="s">&quot;Event: \&quot;%s\&quot; triggered at %0.3f, response &#39;%s&#39;\n&quot;</span><span class="p">,</span>
                            ev<span class="p">[[</span><span class="m">1</span><span class="p">]],</span>ev<span class="p">[[</span><span class="m">2</span><span class="p">]],</span>toJSON<span class="p">(</span>ev<span class="p">[[</span><span class="m">4</span><span class="p">]])))</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <!--<h3>Table Of Contents</h3>-->
          <h3>Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_python.html">Control from Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_matlab.html">Control from MATLAB</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Control from R</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-experiment">Sample experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recording-responses">Recording responses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stimuli.html">Standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="tut_stimuli.html">New stimuli</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Brief reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html#indices-and-tables">Indices and tables</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="tut_matlab.html" title="Control from MATLAB"
             >previous</a> |
          <a href="stimuli.html" title="Standard library"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="_sources/tut_r.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2014, Peter Jurica, Sergei Gepshtein.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>